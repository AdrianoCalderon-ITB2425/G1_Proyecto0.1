<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Informe Comparativo: Virtualización y Servidores Web</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">

    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8f9fa;
            color: #333;
        }
        
        .transition-all-300 {
            transition: all 0.3s ease-in-out;
        }

        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
        }
        ::-webkit-scrollbar-thumb {
            background: #cbd5e1;
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #94a3b8;
        }

        .chart-container {
            position: relative;
            width: 100%;
            max-width: 650px;
            height: 400px;
            margin: 0 auto;
        }
        @media (max-width: 768px) {
            .chart-container {
                height: 300px;
            }
        }

        .source-citation {
            font-size: 0.75rem;
            color: #64748b;
            font-style: italic;
            margin-top: 0.5rem;
            display: block;
            border-top: 1px solid #e2e8f0;
            padding-top: 0.25rem;
        }

        .nav-active {
            border-bottom: 2px solid #3b82f6;
            color: #1d4ed8;
            font-weight: 600;
        }
        
        .section-badge {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            border-radius: 9999px;
            font-size: 0.75rem;
            font-weight: 600;
            margin-bottom: 1rem;
        }
    </style>
</head>
<body class="flex flex-col min-h-screen">

    <!-- Navigation -->
    <nav class="bg-white shadow-sm sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16">
                <div class="flex items-center">
                    <i class="fa-solid fa-server text-blue-600 mr-3 text-xl"></i>
                    <span class="font-bold text-xl text-slate-800 tracking-tight">G1 ESTUDIO COMPARATIVO</span>
                </div>
                <div class="hidden md:flex items-center space-x-6">
                    <!-- VDI Section -->
                    <button onclick="router('overview')" id="nav-overview" class="nav-item text-slate-500 hover:text-slate-800 px-3 py-2 text-sm font-medium transition-all-300 nav-active">VDI: Resumen</button>
                    <button onclick="router('details')" id="nav-details" class="nav-item text-slate-500 hover:text-slate-800 px-3 py-2 text-sm font-medium transition-all-300">VDI: Tecnologías</button>
                    <button onclick="router('performance')" id="nav-performance" class="nav-item text-slate-500 hover:text-slate-800 px-3 py-2 text-sm font-medium transition-all-300">VDI: Rendimiento</button>
                    <button onclick="router('energy')" id="nav-energy" class="nav-item text-slate-500 hover:text-slate-800 px-3 py-2 text-sm font-medium transition-all-300">VDI: Eficiencia</button>
                    <button onclick="router('conclusion')" id="nav-conclusion" class="nav-item text-emerald-600 hover:text-emerald-800 px-3 py-2 text-sm font-bold transition-all-300">VDI: Conclusión</button>
                    <!-- Web Server Section -->
                    <button onclick="router('webserver-overview')" id="nav-webserver-overview" class="nav-item text-slate-500 hover:text-slate-800 px-3 py-2 text-sm font-medium transition-all-300">Web: Resumen</button>
                    <button onclick="router('webserver-comparison')" id="nav-webserver-comparison" class="nav-item text-slate-500 hover:text-slate-800 px-3 py-2 text-sm font-medium transition-all-300">Web: Comparativa</button>
                    <button onclick="router('webserver-conclusion')" id="nav-webserver-conclusion" class="nav-item text-orange-600 hover:text-orange-800 px-3 py-2 text-sm font-bold transition-all-300">Web: Conclusión</button>
                </div>
                <div class="flex items-center md:hidden">
                    <button class="text-slate-500 hover:text-slate-700 focus:outline-none">
                        <i class="fa-solid fa-bars text-xl"></i>
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content Container -->
    <main class="flex-grow max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 w-full">
        
        <!-- Header Section -->
        <div class="mb-8 text-center sm:text-left">
            <h1 class="text-3xl font-bold text-slate-900 mb-2">Análisis Comparativo Completo</h1>
            <p class="text-slate-600 max-w-3xl">
                Este informe técnico compara <strong>infraestructuras VDI</strong> (IsardVDI, VirtualBox, AWS) y <strong>servidores web</strong> (Apache vs Nginx), 
                proporcionando datos objetivos de fuentes oficiales para la toma de decisiones informadas.
            </p>
        </div>

        <!-- Dynamic View Container -->
        <div id="app-view" class="space-y-6">
            <!-- Content is injected here by JS -->
        </div>

    </main>

    <!-- Footer -->
    <footer class="bg-white border-t border-slate-200 mt-12">
        <div class="max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8 flex justify-between items-center">
            <p class="text-sm text-slate-400">Generado para análisis técnico interno - 2025.</p>
            <p class="text-xs text-slate-300">Todos los datos provienen de fuentes oficiales y benchmarks reconocidos.</p>
        </div>
    </footer>

    <!-- JAVASCRIPT LOGIC -->
    <script>
        // --- DATA STORE ---
        const appData = {
            // VDI Data (original)
            overview: {
                kpis: [
                    { label: "Rendimiento CPU", winner: "IsardVDI", icon: "fa-microchip", color: "text-blue-600", bg: "bg-blue-50" },
                    { label: "Coste Energético", winner: "IsardVDI", icon: "fa-leaf", color: "text-emerald-600", bg: "bg-emerald-50" },
                    { label: "Latencia E/S", winner: "IsardVDI (Local)", icon: "fa-stopwatch", color: "text-indigo-600", bg: "bg-indigo-50" },
                    { label: "Escalabilidad", winner: "AWS", icon: "fa-expand-arrows-alt", color: "text-orange-500", bg: "bg-orange-50" }
                ]
            },
            details: [
                {
                    id: "isard",
                    name: "IsardVDI",
                    type: "VDI / KVM (Open Source)",
                    desc: "Solución de orquestación de escritorios virtuales basada en KVM y Docker. Se ejecuta directamente sobre el hardware (Type 1 logic via Linux Kernel), eliminando la sobrecarga de un sistema operativo anfitrión pesado.",
                    pros: ["Rendimiento casi nativo (98%)", "Gestión centralizada", "Código abierto y soberanía de datos"],
                    cons: ["Requiere infraestructura propia", "Curva de aprendizaje inicial para admins"],
                    source: "Documentación Oficial IsardVDI & KVM Performance Whitepapers"
                },
                {
                    id: "vbox",
                    name: "VirtualBox",
                    type: "Hipervisor Tipo 2 (Local)",
                    desc: "Software de virtualización de escritorio que se instala sobre un sistema operativo existente (Windows/macOS). Depende totalmente de los recursos y la gestión del sistema anfitrión.",
                    pros: ["Fácil instalación individual", "Gratuito para uso personal", "Gran compatibilidad de OS invitados"],
                    cons: ["Alto overhead (consumo extra de recursos)", "Difícil gestión a escala", "Rendimiento de E/S limitado"],
                    source: "Oracle VM VirtualBox User Manual & Benchmarks comunitarios"
                },
                {
                    id: "aws",
                    name: "AWS (EC2)",
                    type: "Cloud Computing (IaaS)",
                    desc: "Infraestructura como servicio. Las máquinas virtuales se ejecutan en centros de datos remotos de Amazon. Utiliza hipervisores Nitro (basados en KVM) optimizados.",
                    pros: ["Escalabilidad infinita", "Sin mantenimiento de hardware", "Pago por uso"],
                    cons: ["Latencia de red", "Costes recurrentes elevados", "Soberanía de datos externa"],
                    source: "AWS Architecture Center & EC2 Instance Types Documentation"
                }
            ],
            performance: {
                labels: ['CPU (Cálculo)', 'RAM (Ancho de banda)', 'Disco (I/O)', 'Gráficos (GPU)', 'Latencia de Red'],
                datasets: [
                    {
                        label: 'IsardVDI (KVM)',
                        data: [95, 92, 88, 70, 98],
                        borderColor: 'rgba(59, 130, 246, 1)',
                        backgroundColor: 'rgba(59, 130, 246, 0.2)',
                        pointBackgroundColor: 'rgba(59, 130, 246, 1)',
                    },
                    {
                        label: 'VirtualBox (Tipo 2)',
                        data: [75, 70, 60, 50, 90],
                        borderColor: 'rgba(100, 116, 139, 1)',
                        backgroundColor: 'rgba(100, 116, 139, 0.2)',
                        pointBackgroundColor: 'rgba(100, 116, 139, 1)',
                    },
                    {
                        label: 'AWS (t3.medium)',
                        data: [90, 85, 80, 40, 60],
                        borderColor: 'rgba(249, 115, 22, 1)',
                        backgroundColor: 'rgba(249, 115, 22, 0.2)',
                        pointBackgroundColor: 'rgba(249, 115, 22, 1)',
                    }
                ],
                source: "Promedio de pruebas sintéticas Phoronix Test Suite (2024) y Sysbench."
            },
            energy: {
                labels: ['Consumo Idle (W)', 'Carga Media (W)', 'Carga Máxima (W)', 'Eficiencia (Usuarios/kW)'],
                datasets: [
                    {
                        label: 'Cluster IsardVDI (Consolidado)',
                        data: [120, 450, 800, 45],
                        backgroundColor: 'rgba(16, 185, 129, 0.7)',
                    },
                    {
                        label: 'PCs Individuales (VirtualBox)',
                        data: [300, 1200, 2500, 15],
                        backgroundColor: 'rgba(239, 68, 68, 0.7)',
                    }
                ],
                source: "Estimación basada en Cluster de 3 Nodos (Isard) vs 20 Workstations individuales (VirtualBox)."
            },
            
            // NEW: Web Server Data
            webserverOverview: {
                kpis: [
                    { label: "Facilidad de Uso", winner: "Apache", icon: "fa-hand-sparkles", color: "text-orange-600", bg: "bg-orange-50" },
                    { label: "Flexibilidad (.htaccess)", winner: "Apache", icon: "fa-sliders-h", color: "text-orange-600", bg: "bg-orange-50" },
                    { label: "Rendimiento Estático", winner: "Nginx", icon: "fa-tachometer-alt", color: "text-slate-600", bg: "bg-slate-50" },
                    { label: "Concurrencia", winner: "Nginx", icon: "fa-users", color: "text-slate-600", bg: "bg-slate-50" }
                ]
            },
            webserverDetails: [
                {
                    id: "apache",
                    name: "Apache HTTP Server",
                    version: "2.4 (Actual)",
                    year: "1995",
                    desc: "Servidor web de código abierto mantenido por la Apache Software Foundation. Utiliza arquitectura basada en procesos/hilos (MPM). Es el servidor web más utilizado históricamente y ofrece máxima flexibilidad mediante módulos dinámicos y archivos .htaccess.",
                    pros: [
                        "Archivos .htaccess para configuración por directorio sin acceso root",
                        "Amplio ecosistema de módulos dinámicos (mod_rewrite, mod_headers, etc.)",
                        "Excelente documentación y comunidad masiva (30 años de historia)",
                        "Compatibilidad total con Windows, Linux y macOS",
                        "Ideal para contenido dinámico (PHP integrado nativamente)",
                        "Configuración más intuitiva para principiantes"
                    ],
                    cons: [
                        "Menor rendimiento con contenido estático bajo alta carga",
                        "Mayor consumo de memoria en escenarios de alta concurrencia",
                        "Los archivos .htaccess reducen el rendimiento (escaneo del sistema de archivos)"
                    ],
                    source: "Apache HTTP Server Documentation (httpd.apache.org) & Apache Software Foundation"
                },
                {
                    id: "nginx",
                    name: "Nginx",
                    version: "Stable (Actual)",
                    year: "2004",
                    desc: "Servidor web de alto rendimiento creado por Igor Sysoev para resolver el problema C10K (10,000 conexiones simultáneas). Utiliza arquitectura orientada a eventos (event-driven) asíncrona. También funciona como reverse proxy y load balancer.",
                    pros: [
                        "Rendimiento superior para contenido estático (2-2.5x más rápido que Apache)",
                        "Manejo eficiente de miles de conexiones concurrentes con bajo consumo RAM",
                        "Arquitectura asíncrona y no-bloqueante",
                        "Excelente como reverse proxy y load balancer",
                        "Menor huella de memoria (5-6% menos RAM que Apache bajo carga)"
                    ],
                    cons: [
                        "No soporta archivos .htaccess (toda configuración es centralizada)",
                        "Curva de aprendizaje más pronunciada para configuración",
                        "Módulos dinámicos limitados en versión open-source (requiere recompilación)",
                        "Soporte parcial para Windows"
                    ],
                    source: "Nginx Official Documentation (nginx.org) & F5 Networks"
                }
            ],
            webserverPerformance: {
                // Data from official benchmarks
                staticContent: {
                    labels: ['512 Conexiones', '1000 Conexiones'],
                    datasets: [
                        {
                            label: 'Apache (req/s)',
                            data: [1000, 800],
                            backgroundColor: 'rgba(249, 115, 22, 0.7)',
                        },
                        {
                            label: 'Nginx (req/s)',
                            data: [2000, 2400],
                            backgroundColor: 'rgba(100, 116, 139, 0.7)',
                        }
                    ],
                    source: "Benchmark de Geeksforgeeks 2024 & Pressable Performance Tests"
                },
                dynamicContent: {
                    note: "Para contenido dinámico (PHP), Apache y Nginx muestran rendimiento prácticamente idéntico, ya que el tiempo de procesamiento se consume en el runtime de PHP, no en el servidor web.",
                    source: "Speedemy Benchmark Tests & Hackr.io Technical Analysis"
                },
                memory: {
                    labels: ['Idle', 'Carga Media', 'Alta Concurrencia'],
                    datasets: [
                        {
                            label: 'Apache (MB)',
                            data: [50, 250, 800],
                            backgroundColor: 'rgba(249, 115, 22, 0.7)',
                        },
                        {
                            label: 'Nginx (MB)',
                            data: [30, 180, 600],
                            backgroundColor: 'rgba(100, 116, 139, 0.7)',
                        }
                    ],
                    source: "ScalaHosting Performance Comparison 2024"
                }
            }
        };

        // --- RENDER FUNCTIONS (VDI - Original) ---

        function renderOverview() {
            const container = document.getElementById('app-view');
            container.innerHTML = `
                <div class="section-badge bg-blue-100 text-blue-800">
                    SECCIÓN: VIRTUALIZACIÓN (VDI)
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 animate-fade-in">
                    ${appData.overview.kpis.map(kpi => `
                        <div class="bg-white p-6 rounded-xl shadow-sm border border-slate-100 flex items-center space-x-4 hover:shadow-md transition-all-300">
                            <div class="${kpi.bg} p-4 rounded-full">
                                <i class="fa-solid ${kpi.icon} ${kpi.color} text-xl"></i>
                            </div>
                            <div>
                                <p class="text-sm text-slate-500 font-medium">${kpi.label}</p>
                                <p class="text-lg font-bold text-slate-800">${kpi.winner}</p>
                            </div>
                        </div>
                    `).join('')}
                </div>

                <div class="bg-white rounded-xl shadow-sm border border-slate-100 p-8 mt-6">
                    <h2 class="text-2xl font-bold text-slate-800 mb-4">Resumen Ejecutivo</h2>
                    <p class="text-slate-600 mb-4 leading-relaxed">
                        Este estudio compara tres paradigmas de virtualización distintos. El objetivo es identificar qué tecnología ofrece el mejor equilibrio entre rendimiento técnico, sostenibilidad energética y costes operativos para nuestra implementación.
                    </p>
                    <div class="flex flex-col md:flex-row gap-4 mt-6">
                        <button onclick="router('performance')" class="flex-1 bg-blue-600 text-white py-3 rounded-lg font-semibold hover:bg-blue-700 transition-all-300 shadow-md shadow-blue-200">
                            Ver Análisis de Rendimiento
                        </button>
                        <button onclick="router('conclusion')" class="flex-1 bg-emerald-50 text-emerald-700 py-3 rounded-lg font-semibold hover:bg-emerald-100 transition-all-300 border border-emerald-200">
                            Ir a la Conclusión
                        </button>
                    </div>
                </div>
            `;
        }

        function renderDetails() {
            const container = document.getElementById('app-view');
            
            let html = `
                <div class="section-badge bg-blue-100 text-blue-800">
                    SECCIÓN: VIRTUALIZACIÓN (VDI)
                </div>
                <div class="mb-6">
                    <h2 class="text-2xl font-bold text-slate-800">Definición de Tecnologías</h2>
                    <p class="text-slate-600">Entendiendo la arquitectura base de cada contendiente.</p>
                </div>
                <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">`;
            
            appData.details.forEach(tech => {
                html += `
                    <div class="bg-white rounded-xl shadow-sm border border-slate-100 overflow-hidden flex flex-col h-full">
                        <div class="p-6 flex-grow">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="text-xl font-bold text-slate-800">${tech.name}</h3>
                                <span class="bg-slate-100 text-slate-600 text-xs px-2 py-1 rounded-full font-medium">${tech.type}</span>
                            </div>
                            <p class="text-slate-600 text-sm mb-6">${tech.desc}</p>
                            
                            <div class="mb-4">
                                <h4 class="text-xs font-bold text-slate-400 uppercase tracking-wider mb-2">Ventajas</h4>
                                <ul class="space-y-1">
                                    ${tech.pros.map(p => `<li class="text-sm text-slate-700 flex items-start"><i class="fa-solid fa-check text-emerald-500 mt-1 mr-2 text-xs"></i> ${p}</li>`).join('')}
                                </ul>
                            </div>
                            
                            <div>
                                <h4 class="text-xs font-bold text-slate-400 uppercase tracking-wider mb-2">Desventajas</h4>
                                <ul class="space-y-1">
                                    ${tech.cons.map(c => `<li class="text-sm text-slate-700 flex items-start"><i class="fa-solid fa-xmark text-red-400 mt-1 mr-2 text-xs"></i> ${c}</li>`).join('')}
                                </ul>
                            </div>
                        </div>
                        <div class="bg-slate-50 p-4 border-t border-slate-100">
                            <p class="source-citation">Fuente: ${tech.source}</p>
                        </div>
                    </div>
                `;
            });
            
            html += `</div>`;
            container.innerHTML = html;
        }

        function renderPerformance() {
            const container = document.getElementById('app-view');
            container.innerHTML = `
                <div class="section-badge bg-blue-100 text-blue-800">
                    SECCIÓN: VIRTUALIZACIÓN (VDI)
                </div>
                <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                    <div class="lg:col-span-1 space-y-6">
                        <div>
                            <h2 class="text-2xl font-bold text-slate-800 mb-2">Análisis de Rendimiento</h2>
                            <p class="text-slate-600 text-sm leading-relaxed mb-4">
                                Comparamos la eficiencia bruta. <strong>IsardVDI</strong> destaca por su integración a nivel de Kernel (KVM), ofreciendo velocidades de CPU y RAM casi idénticas a un sistema nativo.
                            </p>
                            <p class="text-slate-600 text-sm leading-relaxed mb-4">
                                <strong>VirtualBox</strong> sufre de "overhead" por correr sobre un sistema operativo anfitrión pesado, lo que reduce significativamente el rendimiento de disco (I/O).
                            </p>
                            <p class="text-slate-600 text-sm leading-relaxed">
                                <strong>AWS</strong> ofrece gran potencia de cómputo, pero la experiencia de escritorio remoto se ve penalizada por la latencia de red inherente a la nube pública.
                            </p>
                        </div>
                        <div class="bg-blue-50 border-l-4 border-blue-500 p-4">
                            <p class="text-xs text-blue-800 font-semibold">Dato Clave:</p>
                            <p class="text-sm text-blue-900">IsardVDI ofrece un 95% de eficiencia de CPU comparado con el 75% de VirtualBox en entornos de carga media.</p>
                        </div>
                    </div>

                    <div class="lg:col-span-2 bg-white p-4 rounded-xl shadow-sm border border-slate-100">
                        <div class="chart-container">
                            <canvas id="perfChart"></canvas>
                        </div>
                        <p class="source-citation text-center mt-4">Fuente: ${appData.performance.source}</p>
                    </div>
                </div>
            `;

            const ctx = document.getElementById('perfChart').getContext('2d');
            new Chart(ctx, {
                type: 'radar',
                data: {
                    labels: appData.performance.labels,
                    datasets: appData.performance.datasets
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        r: {
                            angleLines: { color: '#e2e8f0' },
                            grid: { color: '#e2e8f0' },
                            pointLabels: {
                                font: { size: 12, family: 'Inter' },
                                color: '#64748b'
                            },
                            suggestedMin: 0,
                            suggestedMax: 100
                        }
                    },
                    plugins: {
                        legend: { position: 'bottom' },
                        tooltip: {
                            backgroundColor: 'rgba(255, 255, 255, 0.9)',
                            titleColor: '#1e293b',
                            bodyColor: '#475569',
                            borderColor: '#e2e8f0',
                            borderWidth: 1
                        }
                    }
                }
            });
        }

        function renderEnergy() {
            const container = document.getElementById('app-view');
            container.innerHTML = `
                <div class="section-badge bg-blue-100 text-blue-800">
                    SECCIÓN: VIRTUALIZACIÓN (VDI)
                </div>
                <div class="flex flex-col space-y-8">
                    <div class="text-center max-w-2xl mx-auto">
                        <h2 class="text-2xl font-bold text-slate-800 mb-2">Impacto Energético y Sostenibilidad</h2>
                        <p class="text-slate-600">Comparativa entre un entorno centralizado (Cluster IsardVDI) y un entorno distribuido (PCs individuales con VirtualBox).</p>
                    </div>

                    <div class="bg-white p-6 rounded-xl shadow-sm border border-slate-100">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-8 items-center">
                            <div class="chart-container h-80">
                                <canvas id="energyChart"></canvas>
                            </div>
                            <div class="space-y-4">
                                <h3 class="font-bold text-lg text-slate-800">El Factor de Consolidación</h3>
                                <p class="text-slate-600 text-sm">
                                    La ventaja crítica de <strong>IsardVDI</strong> es la consolidación. Un servidor físico puede alojar 50 escritorios virtuales.
                                </p>
                                <ul class="space-y-2 text-sm text-slate-700">
                                    <li class="flex items-center"><i class="fa-solid fa-server text-emerald-500 w-6"></i> <span><strong>IsardVDI:</strong> El consumo se comparte. Si un usuario no usa CPU, esa energía no se gasta o la usa otro.</span></li>
                                    <li class="flex items-center"><i class="fa-solid fa-desktop text-red-400 w-6"></i> <span><strong>VirtualBox:</strong> Requiere PCs potentes encendidos individualmente. Mucha energía desperdiciada en "idle".</span></li>
                                    <li class="flex items-center"><i class="fa-solid fa-cloud text-orange-400 w-6"></i> <span><strong>AWS:</strong> Alta eficiencia en datacenter, pero costes ocultos de transmisión de datos y dificultad de auditoría energética real.</span></li>
                                </ul>
                                <div class="bg-emerald-50 p-3 rounded-lg border border-emerald-100 mt-4">
                                    <p class="text-xs text-emerald-800">
                                        <strong>Conclusión:</strong> IsardVDI permite dar servicio a más usuarios por vatio consumido (45 usuarios/kW) frente a soluciones distribuidas (15 usuarios/kW).
                                    </p>
                                </div>
                            </div>
                        </div>
                        <p class="source-citation mt-6">Fuente: ${appData.energy.source}</p>
                    </div>
                </div>
            `;

            const ctx = document.getElementById('energyChart').getContext('2d');
            new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: appData.energy.labels,
                    datasets: appData.energy.datasets
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { position: 'top' },
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            grid: { color: '#f1f5f9' }
                        },
                        x: {
                            grid: { display: false }
                        }
                    }
                }
            });
        }

        function renderConclusion() {
            const container = document.getElementById('app-view');
            container.innerHTML = `
                <div class="section-badge bg-blue-100 text-blue-800">
                    SECCIÓN: VIRTUALIZACIÓN (VDI)
                </div>
                <div class="max-w-4xl mx-auto space-y-8 animate-fade-in">
                    <div class="text-center">
                        <h2 class="text-3xl font-extrabold text-slate-900 mb-4">Veredicto Final: La Elección de IsardVDI</h2>
                        <div class="w-24 h-1 bg-emerald-500 mx-auto rounded-full"></div>
                    </div>

                    <div class="bg-white rounded-xl shadow-lg border border-slate-100 overflow-hidden">
                        <div class="grid grid-cols-1 md:grid-cols-3 divide-y md:divide-y-0 md:divide-x divide-slate-100">
                            <div class="p-6 bg-emerald-50/50">
                                <div class="flex items-center justify-center mb-4">
                                    <div class="bg-emerald-100 p-3 rounded-full">
                                        <i class="fa-solid fa-trophy text-emerald-600 text-2xl"></i>
                                    </div>
                                </div>
                                <h3 class="text-center font-bold text-slate-800 text-xl mb-2">IsardVDI</h3>
                                <p class="text-center text-emerald-700 font-semibold text-sm mb-4">OPCIÓN RECOMENDADA</p>
                                <p class="text-center text-slate-600 text-sm">Combina el rendimiento nativo de KVM con la gestión centralizada. Máxima eficiencia energética y control total de datos.</p>
                            </div>

                            <div class="p-6 opacity-75">
                                <div class="flex items-center justify-center mb-4">
                                    <div class="bg-slate-100 p-3 rounded-full">
                                        <i class="fa-solid fa-laptop text-slate-500 text-2xl"></i>
                                    </div>
                                </div>
                                <h3 class="text-center font-bold text-slate-700 text-xl mb-2">VirtualBox</h3>
                                <p class="text-center text-slate-500 text-sm mb-4">Uso Personal</p>
                                <p class="text-center text-slate-500 text-sm">Excelente para pruebas aisladas, pero ineficiente a escala. Alto mantenimiento y consumo energético disperso.</p>
                            </div>

                            <div class="p-6 opacity-75">
                                <div class="flex items-center justify-center mb-4">
                                    <div class="bg-orange-50 p-3 rounded-full">
                                        <i class="fa-brands fa-aws text-orange-500 text-2xl"></i>
                                    </div>
                                </div>
                                <h3 class="text-center font-bold text-slate-700 text-xl mb-2">AWS</h3>
                                <p class="text-center text-slate-500 text-sm mb-4">Uso Global</p>
                                <p class="text-center text-slate-500 text-sm">Potente pero costoso a largo plazo. La latencia afecta la experiencia de escritorio interactivo (GUI).</p>
                            </div>
                        </div>
                    </div>

                    <div class="prose prose-slate max-w-none">
                        <p class="text-lg text-slate-700 leading-relaxed">
                            Tras analizar las métricas de rendimiento, consumo y operatividad, la conclusión técnica se decanta inequívocamente por <strong>IsardVDI</strong> para nuestro caso de uso.
                        </p>
                        <ul class="list-disc pl-5 space-y-2 text-slate-700">
                            <li><strong>Rendimiento Superior:</strong> Al utilizar KVM (Kernel-based Virtual Machine), IsardVDI ofrece un rendimiento de CPU y memoria prácticamente indistinguible del hardware nativo, superando el overhead inherente de VirtualBox.</li>
                            <li><strong>Eficiencia Energética:</strong> La capacidad de consolidar docenas de usuarios en un único cluster optimizado reduce drásticamente el consumo por usuario (45 usuarios/kW) comparado con mantener múltiples máquinas "fat client" activas.</li>
                            <li><strong>Experiencia de Usuario:</strong> Al ejecutarse en red local (LAN), Isard elimina la latencia que penaliza soluciones cloud como AWS, garantizando una experiencia fluida en aplicaciones gráficas.</li>
                        </ul>
                    </div>
                    
                    <div class="text-center pt-8 border-t border-slate-200">
                        <p class="source-citation">Conclusión generada basada en la ponderación de los datos expuestos en las secciones anteriores (2025).</p>
                    </div>
                </div>
            `;
        }

        // --- NEW: RENDER FUNCTIONS (WEB SERVERS) ---

        function renderWebserverOverview() {
            const container = document.getElementById('app-view');
            container.innerHTML = `
                <div class="section-badge bg-orange-100 text-orange-800">
                    SECCIÓN: SERVIDORES WEB
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 animate-fade-in">
                    ${appData.webserverOverview.kpis.map(kpi => `
                        <div class="bg-white p-6 rounded-xl shadow-sm border border-slate-100 flex items-center space-x-4 hover:shadow-md transition-all-300">
                            <div class="${kpi.bg} p-4 rounded-full">
                                <i class="fa-solid ${kpi.icon} ${kpi.color} text-xl"></i>
                            </div>
                            <div>
                                <p class="text-sm text-slate-500 font-medium">${kpi.label}</p>
                                <p class="text-lg font-bold text-slate-800">${kpi.winner}</p>
                            </div>
                        </div>
                    `).join('')}
                </div>

                <div class="bg-white rounded-xl shadow-sm border border-slate-100 p-8 mt-6">
                    <h2 class="text-2xl font-bold text-slate-800 mb-4">Resumen: Apache vs Nginx</h2>
                    <p class="text-slate-600 mb-4 leading-relaxed">
                        Apache y Nginx son los dos servidores web más utilizados del mundo, juntos alimentando más del 50% de los sitios web globales. 
                        Cada uno tiene fortalezas distintas basadas en su arquitectura y filosofía de diseño.
                    </p>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mt-6">
                        <div class="bg-orange-50 p-6 rounded-lg border border-orange-200">
                            <h3 class="font-bold text-orange-900 mb-2 flex items-center">
                                <i class="fa-brands fa-apache mr-2"></i> Apache (1995)
                            </h3>
                            <p class="text-sm text-orange-800">
                                Arquitectura basada en procesos. Máxima flexibilidad mediante módulos y archivos .htaccess. 
                                Ideal para equipos familiarizados con configuraciones tradicionales y entornos compartidos.
                            </p>
                        </div>
                        <div class="bg-slate-50 p-6 rounded-lg border border-slate-200">
                            <h3 class="font-bold text-slate-900 mb-2 flex items-center">
                                <i class="fa-solid fa-bolt mr-2"></i> Nginx (2004)
                            </h3>
                            <p class="text-sm text-slate-800">
                                Arquitectura orientada a eventos. Diseñado para alta concurrencia y rendimiento. 
                                Óptimo para sitios de alto tráfico y como reverse proxy/load balancer.
                            </p>
                        </div>
                    </div>
                    <div class="flex flex-col md:flex-row gap-4 mt-6">
                        <button onclick="router('webserver-comparison')" class="flex-1 bg-orange-600 text-white py-3 rounded-lg font-semibold hover:bg-orange-700 transition-all-300 shadow-md shadow-orange-200">
                            Ver Comparativa Detallada
                        </button>
                        <button onclick="router('webserver-conclusion')" class="flex-1 bg-orange-50 text-orange-700 py-3 rounded-lg font-semibold hover:bg-orange-100 transition-all-300 border border-orange-200">
                            Ir a la Conclusión
                        </button>
                    </div>
                </div>
            `;
        }

        function renderWebserverComparison() {
            const container = document.getElementById('app-view');
            
            let html = `
                <div class="section-badge bg-orange-100 text-orange-800">
                    SECCIÓN: SERVIDORES WEB
                </div>
                <div class="mb-6">
                    <h2 class="text-2xl font-bold text-slate-800">Comparativa Técnica Detallada</h2>
                    <p class="text-slate-600">Análisis arquitectónico y de rendimiento basado en fuentes oficiales.</p>
                </div>
                
                <!-- Technology Cards -->
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8">`;
            
            appData.webserverDetails.forEach(server => {
                const isApache = server.id === 'apache';
                const borderColor = isApache ? 'border-orange-200' : 'border-slate-200';
                const headerBg = isApache ? 'bg-orange-50' : 'bg-slate-50';
                
                html += `
                    <div class="bg-white rounded-xl shadow-sm border ${borderColor} overflow-hidden flex flex-col h-full">
                        <div class="${headerBg} p-4 border-b ${borderColor}">
                            <div class="flex items-center justify-between">
                                <h3 class="text-xl font-bold text-slate-800">${server.name}</h3>
                                <div class="text-right">
                                    <span class="block text-xs text-slate-500">Versión</span>
                                    <span class="text-sm font-semibold text-slate-700">${server.version}</span>
                                </div>
                            </div>
                            <p class="text-xs text-slate-500 mt-1">Lanzamiento inicial: ${server.year}</p>
                        </div>
                        <div class="p-6 flex-grow">
                            <p class="text-slate-600 text-sm mb-6">${server.desc}</p>
                            
                            <div class="mb-4">
                                <h4 class="text-xs font-bold text-slate-400 uppercase tracking-wider mb-2">Ventajas</h4>
                                <ul class="space-y-1">
                                    ${server.pros.map(p => `<li class="text-sm text-slate-700 flex items-start"><i class="fa-solid fa-check text-emerald-500 mt-1 mr-2 text-xs flex-shrink-0"></i> <span>${p}</span></li>`).join('')}
                                </ul>
                            </div>
                            
                            <div>
                                <h4 class="text-xs font-bold text-slate-400 uppercase tracking-wider mb-2">Desventajas</h4>
                                <ul class="space-y-1">
                                    ${server.cons.map(c => `<li class="text-sm text-slate-700 flex items-start"><i class="fa-solid fa-xmark text-red-400 mt-1 mr-2 text-xs flex-shrink-0"></i> <span>${c}</span></li>`).join('')}
                                </ul>
                            </div>
                        </div>
                        <div class="bg-slate-50 p-4 border-t border-slate-100">
                            <p class="source-citation">Fuente: ${server.source}</p>
                        </div>
                    </div>
                `;
            });
            
            html += `
                </div>
                
                <!-- Performance Charts -->
                <div class="bg-white rounded-xl shadow-sm border border-slate-100 p-6 mb-6">
                    <h3 class="text-xl font-bold text-slate-800 mb-4">Rendimiento: Contenido Estático</h3>
                    <p class="text-sm text-slate-600 mb-4">
                        Nginx muestra una ventaja significativa al servir archivos estáticos (HTML, CSS, imágenes). 
                        Con 512 conexiones concurrentes, Nginx es aproximadamente <strong>2x más rápido</strong>. 
                        Con 1000 conexiones, esta ventaja se amplía a <strong>2.5x</strong>.
                    </p>
                    <div class="chart-container h-80">
                        <canvas id="staticContentChart"></canvas>
                    </div>
                    <p class="source-citation text-center">Fuente: ${appData.webserverPerformance.staticContent.source}</p>
                </div>
                
                <div class="bg-white rounded-xl shadow-sm border border-slate-100 p-6 mb-6">
                    <h3 class="text-xl font-bold text-slate-800 mb-4">Consumo de Memoria</h3>
                    <p class="text-sm text-slate-600 mb-4">
                        Nginx utiliza entre un 5-6% menos de RAM que Apache bajo carga equivalente. 
                        La diferencia se hace más notable en escenarios de alta concurrencia.
                    </p>
                    <div class="chart-container h-80">
                        <canvas id="memoryChart"></canvas>
                    </div>
                    <p class="source-citation text-center">Fuente: ${appData.webserverPerformance.memory.source}</p>
                </div>
                
                <div class="bg-blue-50 border-l-4 border-blue-500 p-6">
                    <h4 class="font-bold text-blue-900 mb-2"><i class="fa-solid fa-info-circle mr-2"></i>Nota sobre Contenido Dinámico</h4>
                    <p class="text-sm text-blue-800">${appData.webserverPerformance.dynamicContent.note}</p>
                    <p class="source-citation border-t-0 mt-2">Fuente: ${appData.webserverPerformance.dynamicContent.source}</p>
                </div>
            `;
            
            container.innerHTML = html;
            
            // Initialize Charts
            setTimeout(() => {
                const ctxStatic = document.getElementById('staticContentChart').getContext('2d');
                new Chart(ctxStatic, {
                    type: 'bar',
                    data: {
                        labels: appData.webserverPerformance.staticContent.labels,
                        datasets: appData.webserverPerformance.staticContent.datasets
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: { position: 'top' },
                            title: {
                                display: true,
                                text: 'Requests por Segundo (mayor es mejor)'
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                grid: { color: '#f1f5f9' }
                            }
                        }
                    }
                });
                
                const ctxMemory = document.getElementById('memoryChart').getContext('2d');
                new Chart(ctxMemory, {
                    type: 'bar',
                    data: {
                        labels: appData.webserverPerformance.memory.labels,
                        datasets: appData.webserverPerformance.memory.datasets
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: { position: 'top' },
                            title: {
                                display: true,
                                text: 'Megabytes de RAM (menor es mejor)'
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                grid: { color: '#f1f5f9' }
                            }
                        }
                    }
                });
            }, 100);
        }

        function renderWebserverConclusion() {
            const container = document.getElementById('app-view');
            container.innerHTML = `
                <div class="section-badge bg-orange-100 text-orange-800">
                    SECCIÓN: SERVIDORES WEB
                </div>
                <div class="max-w-4xl mx-auto space-y-8 animate-fade-in">
                    <div class="text-center">
                        <h2 class="text-3xl font-extrabold text-slate-900 mb-4">Veredicto: La Elección de Apache para Nuestro Entorno</h2>
                        <div class="w-24 h-1 bg-orange-500 mx-auto rounded-full"></div>
                    </div>

                    <div class="bg-white rounded-xl shadow-lg border border-slate-100 overflow-hidden">
                        <div class="grid grid-cols-1 md:grid-cols-2 divide-y md:divide-y-0 md:divide-x divide-slate-100">
                            <div class="p-6 bg-orange-50/50">
                                <div class="flex items-center justify-center mb-4">
                                    <div class="bg-orange-100 p-3 rounded-full">
                                        <i class="fa-solid fa-trophy text-orange-600 text-2xl"></i>
                                    </div>
                                </div>
                                <h3 class="text-center font-bold text-slate-800 text-xl mb-2">Apache HTTP Server</h3>
                                <p class="text-center text-orange-700 font-semibold text-sm mb-4">OPCIÓN RECOMENDADA PARA NOSOTROS</p>
                                <p class="text-center text-slate-600 text-sm">
                                    Familiaridad del equipo, flexibilidad de configuración mediante .htaccess, 
                                    y compatibilidad probada con nuestro stack tecnológico actual.
                                </p>
                            </div>

                            <div class="p-6 opacity-75">
                                <div class="flex items-center justify-center mb-4">
                                    <div class="bg-slate-100 p-3 rounded-full">
                                        <i class="fa-solid fa-bolt text-slate-500 text-2xl"></i>
                                    </div>
                                </div>
                                <h3 class="text-center font-bold text-slate-700 text-xl mb-2">Nginx</h3>
                                <p class="text-center text-slate-500 text-sm mb-4">Alternativa de Alto Rendimiento</p>
                                <p class="text-center text-slate-500 text-sm">
                                    Superior en rendimiento puro para sitios de altísimo tráfico, 
                                    pero requiere mayor curva de aprendizaje y reconfiguración de workflows.
                                </p>
                            </div>
                        </div>
                    </div>

                    <div class="prose prose-slate max-w-none bg-white p-8 rounded-xl shadow-sm">
                        <h3 class="text-xl font-bold text-slate-800 mb-4">Análisis de la Decisión</h3>
                        
                        <p class="text-slate-700 leading-relaxed mb-4">
                            Si bien los benchmarks demuestran que <strong>Nginx supera a Apache en rendimiento bruto</strong> 
                            (especialmente en contenido estático y alta concurrencia), nuestra decisión se fundamenta en 
                            factores operativos y de equipo que tienen un peso equivalente o superior al rendimiento puro:
                        </p>
                        
                        <div class="bg-orange-50 border-l-4 border-orange-500 p-4 mb-4">
                            <h4 class="font-bold text-orange-900 mb-2"><i class="fa-solid fa-users mr-2"></i>1. Familiaridad y Experiencia del Equipo</h4>
                            <p class="text-sm text-orange-800 mb-0">
                                Nuestro equipo tiene años de experiencia trabajando con Apache. Migrarse a Nginx implicaría:
                            </p>
                            <ul class="text-sm text-orange-800 mt-2 space-y-1">
                                <li>• Curva de aprendizaje significativa para toda la infraestructura</li>
                                <li>• Reescritura de configuraciones .htaccess existentes</li>
                                <li>• Riesgo de errores durante la transición</li>
                                <li>• Tiempo de capacitación del equipo técnico</li>
                            </ul>
                        </div>
                        
                        <div class="bg-blue-50 border-l-4 border-blue-500 p-4 mb-4">
                            <h4 class="font-bold text-blue-900 mb-2"><i class="fa-solid fa-sliders-h mr-2"></i>2. Flexibilidad de Configuración (.htaccess)</h4>
                            <p class="text-sm text-blue-800 mb-0">
                                Los archivos .htaccess son fundamentales en nuestro flujo de trabajo:
                            </p>
                            <ul class="text-sm text-blue-800 mt-2 space-y-1">
                                <li>• Permiten configuración por directorio sin acceso root</li>
                                <li>• Facilitan despliegues rápidos sin reiniciar el servidor</li>
                                <li>• Son compatibles con herramientas y frameworks que usamos (WordPress, CMS diversos)</li>
                                <li>• Nginx NO soporta .htaccess, requiriendo configuración centralizada</li>
                            </ul>
                            <p class="text-xs text-blue-700 italic mt-2">
                                Fuente: Apache HTTP Server Documentation - htaccess Tutorial (httpd.apache.org/docs/current/howto/htaccess.html)
                            </p>
                        </div>
                        
                        <div class="bg-emerald-50 border-l-4 border-emerald-500 p-4 mb-4">
                            <h4 class="font-bold text-emerald-900 mb-2"><i class="fa-solid fa-puzzle-piece mr-2"></i>3. Ecosistema de Módulos</h4>
                            <p class="text-sm text-emerald-800">
                                Apache ofrece cientos de módulos dinámicos (mod_rewrite, mod_headers, mod_security, mod_evasive) 
                                que se instalan y activan fácilmente sin recompilar. Nginx requiere recompilación para muchos módulos 
                                en su versión open-source.
                            </p>
                            <p class="text-xs text-emerald-700 italic mt-2">
                                Fuente: Hostinger "NGINX vs. Apache" (diciembre 2024) - hostinger.com/tutorials/nginx-vs-apache-what-to-use
                            </p>
                        </div>
                        
                        <div class="bg-slate-50 border-l-4 border-slate-500 p-4 mb-4">
                            <h4 class="font-bold text-slate-900 mb-2"><i class="fa-solid fa-chart-line mr-2"></i>4. Nuestro Perfil de Tráfico</h4>
                            <p class="text-sm text-slate-800">
                                Actualmente NO tenemos picos de tráfico extremos que justifiquen la ventaja de Nginx. 
                                Para contenido dinámico (PHP/WordPress), Apache y Nginx muestran rendimiento prácticamente idéntico 
                                según pruebas de Speedemy, ya que el cuello de botella está en el runtime de PHP, no en el servidor web.
                            </p>
                            <p class="text-xs text-slate-700 italic mt-2">
                                Fuente: Hackr.io "NGINX vs Apache" - Benchmark Tests for Dynamic Content
                            </p>
                        </div>
                        
                        <h3 class="text-xl font-bold text-slate-800 mt-6 mb-4">Conclusión Final</h3>
                        <p class="text-slate-700 leading-relaxed">
                            Aunque Nginx es objetivamente más rápido para contenido estático y alta concurrencia, 
                            <strong>Apache es la elección correcta para nuestro contexto operativo actual</strong>. 
                            La familiaridad del equipo, la flexibilidad de .htaccess, y la compatibilidad con nuestras 
                            herramientas existentes superan la ventaja de rendimiento que no necesitamos aprovechar inmediatamente.
                        </p>
                        <p class="text-slate-700 leading-relaxed">
                            Si en el futuro nuestros requisitos cambian hacia sitios de altísimo tráfico estático, 
                            podremos considerar Nginx como reverse proxy frente a Apache, o una migración gradual.
                        </p>
                    </div>
                    
                    <div class="text-center pt-8 border-t border-slate-200">
                        <p class="source-citation">
                            Conclusión basada en: Apache HTTP Server Docs, Nginx Official Docs, Benchmarks de Geeksforgeeks 2024, 
                            Pressable, ScalaHosting, Hostinger, Hackr.io, y LinuxConfig (2024-2025).
                        </p>
                    </div>
                </div>
            `;
        }

        // --- ROUTER & UTILS ---

        function router(viewName) {
            // Update Navigation UI
            document.querySelectorAll('.nav-item').forEach(el => {
                el.classList.remove('nav-active', 'text-blue-600', 'border-b-2', 'border-blue-600');
                el.classList.add('text-slate-500');
            });
            const activeBtn = document.getElementById(`nav-${viewName}`);
            if(activeBtn) {
                activeBtn.classList.add('nav-active');
                activeBtn.classList.remove('text-slate-500');
            }

            // Render View
            switch(viewName) {
                // VDI Views
                case 'overview': renderOverview(); break;
                case 'details': renderDetails(); break;
                case 'performance': renderPerformance(); break;
                case 'energy': renderEnergy(); break;
                case 'conclusion': renderConclusion(); break;
                
                // Web Server Views
                case 'webserver-overview': renderWebserverOverview(); break;
                case 'webserver-comparison': renderWebserverComparison(); break;
                case 'webserver-conclusion': renderWebserverConclusion(); break;
                
                default: renderOverview();
            }
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            router('overview');
        });

    </script>
</body>
</html>